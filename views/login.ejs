<%- include('includes/head.ejs') %>
<style>
    /* --- Centering Styles (Keep as before) --- */
    html, body { height: 100%; }
    body { display: flex; flex-direction: column; }
    main {
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
  </style>
</head>

<body>
  <%- include('includes/nav.ejs') %>

  <main>
    <div class="container_2 py-5">
      <div class="row justify-content-center">
        <div class="form">

          <div class="card shadow-sm probootstrap-animate login-card">
            <div class="card-body p-4 p-md-5">

              <h2 class="card-title text-center mb-4">Login</h2>

              <% if (errorMessage) { %>
                <div class="error-message text-center">
                  <%= errorMessage %>
                </div>
              <% } %>

              <form action="/login" method="POST">

                <!-- Email Field (still uses input-group for icon) -->
                <div class="form-group mb-3">
                  <div class="password-input-wrapper">
                    <input
                      type="email"
                      class="form-control form-control-lg"
                      placeholder="Email Address"
                      name="email"
                      id="email"
                      value="<%= oldInput.email || '' %>"
                      required
                      aria-label="Email Address"
                    >
                  </div>
                </div>

                <!-- Password Field (custom structure) -->
                <div class="form-group mb-4">
                  <div class="password-input-wrapper">
                    <input
                      type="password"
                      class="form-control form-control-lg"
                      placeholder="Password"
                      name="password"
                      id="password"
                      value=""
                      required
                      aria-label="Password"
                    >
                    <button class="password-toggle-btn" type="button" id="togglePassword" aria-label="Show password">
                      <i class="fas fa-eye" aria-hidden="true"></i>
                    </button>
                  </div>
                </div>

                <input type="hidden" name="_csrf" value="<%= csrfToken %>">

                <div class="form-group">
                  <button
                    class="btn btn-primary btn-lg btn-block probootstrap-animate"
                    type="submit">
                    Login
                  </button>
                </div>

                <div class="text-center mt-4">
                  <a href="/reset" class="d-block mb-2">Forgot Password?</a>
                  <hr style="width: 100%; margin: 1rem auto;">
                  <p>Don't have an account?</p>
                  <a href="/signup" class="font-weight-bold">Register Now</a>
                </div>

              </form>

            </div> <!-- /card-body -->
          </div> <!-- /card -->

        </div> <!-- /col -->
      </div> <!-- /row -->
    </div> <!-- /container -->
  </main>

  <%- include('includes/footer.ejs') %>
  <%- include('includes/end.ejs') %>
</body>